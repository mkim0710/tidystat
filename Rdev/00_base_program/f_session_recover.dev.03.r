# https://chatgpt.com/c/8899ed03-9f26-42cc-9b0e-dd5aa3ad22a0
#|________________________________________________________________________________|#  
#|%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%|#  
#|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~|#  
#|++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++|#  
#|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~|#  
#|________________________________________________________________________________|#  
#|%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%|#  
# @ Directory Listing -----  
# session-36531e49/
# ├── 10460832
# ├── 10460832-contents
# ├── 638F50C0
# ├── 638F50C0-contents
# ├── 690764CF
# ├── 690764CF-contents
# ...

# @ Metadata File Structure -----  
# {
#   "path": "/path/to/original/file.R",
#   "contents": "print('Hello, world!')",
#   "properties": {
#     "tempName": "Untitled",
#     "dirty": true
#   },
#   "type": "r_source"
# }

# @ Content File -----  
# print('Hello, world!')


#|________________________________________________________________________________|#  
#|%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%|#  
".Rproj.user/shared" |> list.files(recursive = TRUE) |> dput()
# > ".Rproj.user/shared" |> list.files(recursive = TRUE) |> dput() ----  
.Rproj.user.shared.list.files1 = c("notebooks/40C0E44C-f_df.CreateTableOne.dev/1/E3EEE3A9702e3c18/chunks.json", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/E3EEE3A9800d5f74/chunks.json", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/E3EEE3A9a2e5d569/chunks.json", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/c2kv2ircdtmr9/000002.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/c2x3oh7bg7vcn/00000f.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/c49999ibehcer/00000f.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/c4tzsvl4tx3z9/000002.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/cajqc0s3qa66a/00000f.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/cajqc0s3qa66a/000010.error", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/cfodvqfdr55z9/000002.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/cfypu2gan1bf2/00000f.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/chunks.json", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/cin2ot4z8d41v/000002.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/clrumf873fdfj/000002.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/cpqgn7q99rlw9/000002.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/csetup_chunk/00000f.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/cw2w3ivglpk94/000002.csv", 
"notebooks/40C0E44C-f_df.CreateTableOne.dev/1/s/cyymmc3upsdwu/000002.csv", 
"notebooks/5F81EFC4-01df_dirs_recursive.df_files-templates/1/s/c23qhhe5x2wrv/000002.csv", 
"notebooks/5F81EFC4-01df_dirs_recursive.df_files-templates/1/s/ce4o8kuj7o02a/000002.csv", 
"notebooks/5F81EFC4-01df_dirs_recursive.df_files-templates/1/s/chunks.json", 
"notebooks/5F81EFC4-01df_dirs_recursive.df_files-templates/1/s/cq21394qy6r6k/000002.csv", 
"notebooks/5F81EFC4-01df_dirs_recursive.df_files-templates/1/s/ct8kr3u95vsyn/000002.csv", 
"notebooks/5F81EFC4-01df_dirs_recursive.df_files-templates/1/s/cz29vill2otj7/000002.csv", 
"notebooks/6E4A1B4B-notebook/1/s/chunks.json", "notebooks/7A8FA73D-templates-00env1.minimum/1/E3EEE3A910067b8e/chunks.json", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/E3EEE3A917269cd5/chunks.json", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/c0uhg07q4d6fw/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/c10zsbyhuapsu/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/c2q3crr2qp3k8/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/c4o0rc7cr9pd0/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/c9297t90t4hiu/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/c9s76zfo3myti/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/cbt3e1r4e3pgf/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/cc2yziwhumm4a/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/cce82lv80a8k7/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/ccj7funk5py3r/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/ccqfmd35do6vt/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/cdl7qmkmkptfy/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/cfkz173fnuh1r/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/cg8yioy5sh7bn/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/chunks.json", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/chv0zlu3fsbxe/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/ciys6e08fee9h/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/ck58a5ff0jky2/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/cmdj6ori11p58/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/cn5544fos7006/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/crxqix184nn6r/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/csetup_chunk/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/cuhej75jwtdsk/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/cwsleju1hudba/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/cz2jiobqp5w72/00000f.csv", 
"notebooks/7A8FA73D-templates-00env1.minimum/1/s/czjehx3ly9n68/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/c0t9ghu2buef2/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/c99b55eelqwnh/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/ceh5ibu3bdppz/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/ch46cpe3wctnu/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/chunks.json", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/cilmqv1876xll/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/cipmsbib7861f/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/cl1gjdhn5sge3/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/cqq7blt8svvkv/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/csetup_chunk/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/cuasmwvhip0fy/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/cuigrrxwohy23/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/cuzpcsb8h0w1d/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/cyp5frst94ane/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/cyrnlj0ymdq5k/00000f.csv", 
"notebooks/9EC9A4B0-f_git.03_final.pull_rebase_push.dev/1/s/czk7rsj2uariz/00000f.csv", 
"notebooks/patch-chunk-names", "notebooks/paths")
#|++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++|#  
function_setdiff = function(x, y) {
    out = list()
    out$setdiff_x_y = setdiff(x, y)
    out$setdiff_y_x = setdiff(y, x)
    out
}
#|++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++|#  
function_setdiff(".Rproj.user/shared" |> list.files(recursive = TRUE), .Rproj.user.shared.list.files1) |> str()
# > function_setdiff(".Rproj.user/shared" |> list.files(recursive = TRUE), .Rproj.user.shared.list.files1) |> str()
# List of 2
#  $ setdiff_x_y: chr(0) 
#  $ setdiff_y_x: chr "notebooks/6E4A1B4B-notebook/1/s/chunks.json"
#|________________________________________________________________________________|#  
#|%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%|#  
".Rproj.user/E3EEE3A9" |> list.files(recursive = TRUE) |> dput()
# > ".Rproj.user/E3EEE3A9" |> list.files(recursive = TRUE) |> dput() ----  
.Rproj.user.E3EEE3A9.list.files1 = c("build_options", "copilot_options", "pcs/debug-breakpoints.pper", 
"pcs/files-pane.pper", "pcs/packages-pane.pper", "pcs/source-pane.pper", 
"pcs/windowlayoutstate.pper", "pcs/workbench-pane.pper", "persistent-state", 
"saved_source_markers", "sources/prop/00965602", "sources/prop/0173D0A4", 
"sources/prop/01AFB2EE", "sources/prop/05634E50", "sources/prop/0AA78314", 
"sources/prop/101D96B9", "sources/prop/113E96D9", "sources/prop/15FCA076", 
"sources/prop/16D60B62", "sources/prop/1B55F4AB", "sources/prop/1BB6DB06", 
"sources/prop/1E9AB7AC", "sources/prop/1FFD9AC9", "sources/prop/2BDE767F", 
"sources/prop/31C6C727", "sources/prop/364F61EC", "sources/prop/3742BDF1", 
"sources/prop/3BA1EBD7", "sources/prop/3CF4DF68", "sources/prop/4105D26C", 
"sources/prop/52FF770D", "sources/prop/57A92AF6", "sources/prop/5D8401EF", 
"sources/prop/607BBC65", "sources/prop/64FF6493", "sources/prop/669F62A1", 
"sources/prop/66A1D830", "sources/prop/67AAF20A", "sources/prop/685820B2", 
"sources/prop/74656519", "sources/prop/77B63436", "sources/prop/7829259C", 
"sources/prop/78B040BB", "sources/prop/7C7E305C", "sources/prop/7F844DC9", 
"sources/prop/8AB57F3A", "sources/prop/8B245126", "sources/prop/9300290C", 
"sources/prop/9444F480", "sources/prop/A0D94AC6", "sources/prop/A3F1A976", 
"sources/prop/A664679E", "sources/prop/ABD3A4CD", "sources/prop/AC79737C", 
"sources/prop/AFCC3AF9", "sources/prop/B0ABAF46", "sources/prop/B211075A", 
"sources/prop/B3C86916", "sources/prop/B7C7B529", "sources/prop/B7D4047D", 
"sources/prop/C1B2E00B", "sources/prop/C4D0A2D8", "sources/prop/CE5A4575", 
"sources/prop/DBBE575C", "sources/prop/DF016A9E", "sources/prop/EA5E63B2", 
"sources/prop/EF0AC0FE", "sources/prop/EF6E1100", "sources/prop/F829F38F", 
"sources/prop/FD96AF4D", "sources/prop/FF1B8126", "sources/prop/FFA35E83", 
"sources/prop/INDEX", "sources/session-36531e49/0E61B345-contents", 
"sources/session-36531e49/10460832", "sources/session-36531e49/10460832-contents", 
"sources/session-36531e49/174795B9-contents", "sources/session-36531e49/22452B12", 
"sources/session-36531e49/22452B12-contents", "sources/session-36531e49/2A20CF9B-contents", 
"sources/session-36531e49/38603E6E-contents", "sources/session-36531e49/46548A49-contents", 
"sources/session-36531e49/528BC5EF-contents", "sources/session-36531e49/556D77EE-contents", 
"sources/session-36531e49/5B0523FC-contents", "sources/session-36531e49/5D26FF15-contents", 
"sources/session-36531e49/638F50C0", "sources/session-36531e49/638F50C0-contents", 
"sources/session-36531e49/690764CF", "sources/session-36531e49/690764CF-contents", 
"sources/session-36531e49/71F59863-contents", "sources/session-36531e49/8249F163", 
"sources/session-36531e49/8249F163-contents", "sources/session-36531e49/8A69B8E1-contents", 
"sources/session-36531e49/8C2A2429-contents", "sources/session-36531e49/9879D8CD", 
"sources/session-36531e49/9879D8CD-contents", "sources/session-36531e49/A05040E0", 
"sources/session-36531e49/A05040E0-contents", "sources/session-36531e49/AB6A0C82-contents", 
"sources/session-36531e49/C1B3DBFF-contents", "sources/session-36531e49/CA927474-contents", 
"sources/session-36531e49/CF32D5C1-contents", "sources/session-36531e49/D14D3FDE", 
"sources/session-36531e49/D14D3FDE-contents", "sources/session-36531e49/D4502CEB", 
"sources/session-36531e49/D4502CEB-contents", "sources/session-36531e49/E01BF946", 
"sources/session-36531e49/E01BF946-contents", "sources/session-36531e49/E284179F-contents", 
"sources/session-36531e49/F29AB6E7", "sources/session-36531e49/F29AB6E7-contents", 
"sources/session-36531e49/FB61A0E1-contents", "sources/session-36531e49/FFF77695", 
"sources/session-36531e49/FFF77695-contents", "sources/session-36531e49/lock_file"
)
#|++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++|#  
function_setdiff(".Rproj.user/E3EEE3A9" |> list.files(recursive = TRUE), .Rproj.user.E3EEE3A9.list.files1) |> str()
# > function_setdiff(".Rproj.user/E3EEE3A9" |> list.files(recursive = TRUE), .Rproj.user.E3EEE3A9.list.files1) |> str()
# List of 2
#  $ setdiff_x_y: chr [1:25] "sources/prop/5057B9B6" "sources/prop/C8C3257E" "sources/session-bc8d1df6/10460832" "sources/session-bc8d1df6/10460832-contents" ...
#  $ setdiff_y_x: chr [1:43] "sources/session-36531e49/0E61B345-contents" "sources/session-36531e49/10460832" "sources/session-36531e49/10460832-contents" "sources/session-36531e49/174795B9-contents" ...
#|________________________________________________________________________________|#  
#|%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%|#  
library(jsonlite)

# Define the path to the sources directory
sources_dir <- file.path(".Rproj.user", "E3EEE3A9", "sources")

# Function to list directories and wait if the result is empty
list_dirs_with_wait <- function(path) {
  dirs <- list.dirs(path, recursive = FALSE)
  while (length(dirs) == 0) {
    Sys.sleep(1) # Wait for 1 second before retrying
    dirs <- list.dirs(path, recursive = FALSE)
  }
  return(dirs)
}

# List all directories in the sources directory
all_dirs <- list_dirs_with_wait(sources_dir)

# Filter for session directories
session_dirs <- all_dirs[grepl("session-", basename(all_dirs))]

print("List of session directories:")
print(session_dirs)

# Check if there are any session directories
if (length(session_dirs) == 0) {
  stop("No session directories found.")
}

# Get the most recent session directory
most_recent_session <- session_dirs[which.max(file.info(session_dirs)$mtime)]

print(paste("Most recent session directory:", most_recent_session))

# List all files in the most recent session directory
session_files <- list.files(most_recent_session, full.names = TRUE)
print("List of session files:")
print(session_files)

# Create output folder if it doesn't exist
out_folder <- "recovered_untitled_files"
dir.create(out_folder, showWarnings = FALSE)

# Function to read and recover an untitled source file
recover_untitled_source_file <- function(metadata_file, content_file, out_folder) {
  # Read the metadata
  metadata <- fromJSON(metadata_file)
  print(paste("Processing metadata file:", metadata_file))
  print(metadata)
  
  # Determine the output filename
  if (!is.null(metadata$properties$tempName)) {
    filename <- metadata$properties$tempName
  } else {
    filename <- basename(metadata_file)
  }
  
  # Add a unique identifier to the filename to avoid conflicts
  filename <- paste0("Untitled-", filename, "-", basename(metadata_file))
  
  # Read the contents
  contents <- if (file.exists(content_file) && file.info(content_file)$size > 0) {
    readLines(content_file)
  } else if (!is.null(metadata$contents) && nchar(metadata$contents) > 0) {
    metadata$contents
  } else {
    "No contents found"
  }
  
  # Determine the output path
  target <- file.path(out_folder, paste0(filename, ".R"))
  
  # Write the contents to the target file
  writeLines(contents, con = target)
  
  # Return the path to the recovered file
  return(target)
}

# Iterate over session files to recover metadata and contents for untitled files
recovered_files <- lapply(session_files, function(file) {
  if (!grepl("-contents$", file)) {
    content_file <- paste0(file, "-contents")
    print(paste("Checking file:", file))
    if (file.exists(content_file)) {
      print(paste("Content file exists:", content_file))
      metadata <- fromJSON(file)
      print(paste("Metadata content:", toJSON(metadata, pretty = TRUE)))
      if (!is.null(metadata$properties$tempName) && grepl("Untitled", metadata$properties$tempName)) {
        print(paste("Recovering untitled file:", file))
        return(recover_untitled_source_file(file, content_file, out_folder))
      } else {
        print(paste("File", file, "is not untitled or has no tempName."))
      }
    } else {
      print(paste("Content file does not exist for metadata file:", file))
    }
  } else {
    print(paste("File", file, "is a content file, skipping."))
  }
  return(NULL)
})

# Print the paths of recovered files
print("Recovered files:")
print(recovered_files)

# > print("List of session directories:")
# [1] "List of session directories:"
# > print(session_dirs)
# [1] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35"
# > 
# > # Check if there are any session directories
# > if (length(session_dirs) == 0) {
# +   stop("No session directories found.")
# + }
# > 
# > # Get the most recent session directory
# > most_recent_session <- session_dirs[which.max(file.info(session_dirs)$mtime)]
# > 
# > print(paste("Most recent session directory:", most_recent_session))
# [1] "Most recent session directory: .Rproj.user/E3EEE3A9/sources/session-b71e3d35"
# > 
# > # List all files in the most recent session directory
# > session_files <- list.files(most_recent_session, full.names = TRUE)
# > print("List of session files:")
# [1] "List of session files:"
# > print(session_files)
#  [1] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/06A2BF28"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/06A2BF28-contents"
#  [3] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/10460832"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/10460832-contents"
#  [5] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/22452B12"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/22452B12-contents"
#  [7] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/638F50C0"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/638F50C0-contents"
#  [9] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/690764CF"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/690764CF-contents"
# [11] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/8249F163"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/8249F163-contents"
# [13] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/9879D8CD"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/9879D8CD-contents"
# [15] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/A05040E0"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/A05040E0-contents"
# [17] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/D14D3FDE"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/D14D3FDE-contents"
# [19] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/E01BF946"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/E01BF946-contents"
# [21] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/F29AB6E7"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/F29AB6E7-contents"
# [23] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/FFF77695"          ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/FFF77695-contents"
# [25] ".Rproj.user/E3EEE3A9/sources/session-b71e3d35/lock_file"        
# > 
# > # Create output folder if it doesn't exist
# > out_folder <- "recovered_untitled_files"
# > dir.create(out_folder, showWarnings = FALSE)
# > 
# > # Function to read and recover an untitled source file
# > recover_untitled_source_file <- function(metadata_file, content_file, out_folder) {
# +   # Read the metadata
# +   metadata <- fromJSON(metadata_file)
# +   print(paste("Processing metadata file:", metadata_file))
# +   print(metadata)
# +   
# +   # Determine the output filename
# +   if (!is.null(metadata$properties$tempName)) {
# +     filename <- metadata$properties$tempName
# +   } else {
# +     filename <- basename(metadata_file)
# +   }
# +   
# +   # Add a unique identifier to the filename to avoid conflicts
# +   filename <- paste0("Untitled-", filename, "-", basename(metadata_file))
# +   
# +   # Read the contents
# +   contents <- if (file.exists(content_file) && file.info(content_file)$size > 0) {
# +     readLines(content_file)
# +   } else if (!is.null(metadata$contents) && nchar(metadata$contents) > 0) {
# +     metadata$contents
# +   } else {
# +     "No contents found"
# +   }
# +   
# +   # Determine the output path
# +   target <- file.path(out_folder, paste0(filename, ".R"))
# +   
# +   # Write the contents to the target file
# +   writeLines(contents, con = target)
# +   
# +   # Return the path to the recovered file
# +   return(target)
# + }
# > 
# > # Iterate over session files to recover metadata and contents for untitled files
# > recovered_files <- lapply(session_files, function(file) {
# +   if (!grepl("-contents$", file)) {
# +     content_file <- paste0(file, "-contents")
# +     print(paste("Checking file:", file))
# +     if (file.exists(content_file)) {
# +       print(paste("Content file exists:", content_file))
# +       metadata <- fromJSON(file)
# +       print(paste("Metadata content:", toJSON(metadata, pretty = TRUE)))
# +       if (!is.null(metadata$properties$tempName) && grepl("Untitled", metadata$properties$tempName)) {
# +         print(paste("Recovering untitled file:", file))
# +         return(recover_untitled_source_file(file, content_file, out_folder))
# +       } else {
# +         print(paste("File", file, "is not untitled or has no tempName."))
# +       }
# +     } else {
# +       print(paste("Content file does not exist for metadata file:", file))
# +     }
# +   } else {
# +     print(paste("File", file, "is a content file, skipping."))
# +   }
# +   return(NULL)
# + })
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/06A2BF28"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/06A2BF28-contents"
# [1] "Metadata content: {\n  \"id\": [\"06A2BF28\"],\n  \"path\": [\"~/github_tidystat/Rdev/00_base_program/f_session_recover.dev.02-void.Rmd\"],\n  \"project_path\": [\"Rdev/00_base_program/f_session_recover.dev.02-void.Rmd\"],\n  \"type\": [\"r_markdown\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1716217704695],\n  \"source_on_save\": [false],\n  \"relative_order\": [12],\n  \"properties\": {\n    \"tempName\": [\"Untitled1\"],\n    \"chunk_output_type\": [\"inline\"],\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"373,0\"],\n    \"scrollLine\": [\"0\"],\n    \"last_setup_crc32\": [\"\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1716220043],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1716220043660],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "Recovering untitled file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/06A2BF28"
# [1] "Processing metadata file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/06A2BF28"
# $id
# [1] "06A2BF28"
# 
# $path
# [1] "~/github_tidystat/Rdev/00_base_program/f_session_recover.dev.02-void.Rmd"
# 
# $project_path
# [1] "Rdev/00_base_program/f_session_recover.dev.02-void.Rmd"
# 
# $type
# [1] "r_markdown"
# 
# $hash
# [1] "0"
# 
# $contents
# [1] ""
# 
# $dirty
# [1] FALSE
# 
# $created
# [1] 1.716218e+12
# 
# $source_on_save
# [1] FALSE
# 
# $relative_order
# [1] 12
# 
# $properties
# $properties$tempName
# [1] "Untitled1"
# 
# $properties$chunk_output_type
# [1] "inline"
# 
# $properties$source_window_id
# [1] ""
# 
# $properties$Source
# [1] "Source"
# 
# $properties$cursorPosition
# [1] "373,0"
# 
# $properties$scrollLine
# [1] "0"
# 
# $properties$last_setup_crc32
# [1] ""
# 
# 
# $folds
# [1] ""
# 
# $lastKnownWriteTime
# [1] 1716220043
# 
# $encoding
# [1] "UTF-8"
# 
# $collab_server
# [1] ""
# 
# $source_window
# [1] ""
# 
# $last_content_update
# [1] 1.71622e+12
# 
# $read_only
# [1] FALSE
# 
# $read_only_alternatives
# list()
# 
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/06A2BF28-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/10460832"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/10460832-contents"
# [1] "Metadata content: {\n  \"id\": [\"10460832\"],\n  \"path\": [\"~/github_tidystat/RStudio.Cloud set up.r\"],\n  \"project_path\": [\"RStudio.Cloud set up.r\"],\n  \"type\": [\"r_source\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1716207751572],\n  \"source_on_save\": [false],\n  \"relative_order\": [10],\n  \"properties\": {\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"250,0\"],\n    \"scrollLine\": [\"231\"],\n    \"docOutlineVisible\": [\"1\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1716207751],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1716207751],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/10460832 is not untitled or has no tempName."
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/10460832-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/22452B12"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/22452B12-contents"
# [1] "Metadata content: {\n  \"id\": [\"22452B12\"],\n  \"path\": [\"~/github_tidystat/Rdev/00_base_program/f_session_recover.RsRecovr.r\"],\n  \"project_path\": [\"Rdev/00_base_program/f_session_recover.RsRecovr.r\"],\n  \"type\": [\"r_source\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1716210525925],\n  \"source_on_save\": [false],\n  \"relative_order\": [11],\n  \"properties\": {\n    \"tempName\": [\"Untitled1\"],\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"363,0\"],\n    \"scrollLine\": [\"0\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1716210669],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1716210669335],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "Recovering untitled file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/22452B12"
# [1] "Processing metadata file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/22452B12"
# $id
# [1] "22452B12"
# 
# $path
# [1] "~/github_tidystat/Rdev/00_base_program/f_session_recover.RsRecovr.r"
# 
# $project_path
# [1] "Rdev/00_base_program/f_session_recover.RsRecovr.r"
# 
# $type
# [1] "r_source"
# 
# $hash
# [1] "0"
# 
# $contents
# [1] ""
# 
# $dirty
# [1] FALSE
# 
# $created
# [1] 1.716211e+12
# 
# $source_on_save
# [1] FALSE
# 
# $relative_order
# [1] 11
# 
# $properties
# $properties$tempName
# [1] "Untitled1"
# 
# $properties$source_window_id
# [1] ""
# 
# $properties$Source
# [1] "Source"
# 
# $properties$cursorPosition
# [1] "363,0"
# 
# $properties$scrollLine
# [1] "0"
# 
# 
# $folds
# [1] ""
# 
# $lastKnownWriteTime
# [1] 1716210669
# 
# $encoding
# [1] "UTF-8"
# 
# $collab_server
# [1] ""
# 
# $source_window
# [1] ""
# 
# $last_content_update
# [1] 1.716211e+12
# 
# $read_only
# [1] FALSE
# 
# $read_only_alternatives
# list()
# 
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/22452B12-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/638F50C0"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/638F50C0-contents"
# [1] "Metadata content: {\n  \"id\": [\"638F50C0\"],\n  \"path\": [\"~/github_tidystat/Rdev/60_communicate_report_export/f_df.CreateTableOne.dev.r\"],\n  \"project_path\": [\"Rdev/60_communicate_report_export/f_df.CreateTableOne.dev.r\"],\n  \"type\": [\"r_source\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1715907877019],\n  \"source_on_save\": [false],\n  \"relative_order\": [3],\n  \"properties\": {\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"44,31\"],\n    \"scrollLine\": [\"0\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1716179718],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1716179718],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/638F50C0 is not untitled or has no tempName."
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/638F50C0-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/690764CF"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/690764CF-contents"
# [1] "Metadata content: {\n  \"id\": [\"690764CF\"],\n  \"path\": [\"~/github_tidystat/RStudio Server Setup.r\"],\n  \"project_path\": [\"RStudio Server Setup.r\"],\n  \"type\": [\"r_source\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1716002841867],\n  \"source_on_save\": [false],\n  \"relative_order\": [7],\n  \"properties\": {\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"259,37\"],\n    \"scrollLine\": [\"0\"],\n    \"docOutlineVisible\": [\"1\"],\n    \"docOutlineSize\": [\"201\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1716190102],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1716190102458],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/690764CF is not untitled or has no tempName."
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/690764CF-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/8249F163"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/8249F163-contents"
# [1] "Metadata content: {\n  \"id\": [\"8249F163\"],\n  \"path\": [\"~/github_tidystat/Rdev/60_communicate_report_export/f_df.CreateTableOne.dev.Rmd\"],\n  \"project_path\": [\"Rdev/60_communicate_report_export/f_df.CreateTableOne.dev.Rmd\"],\n  \"type\": [\"r_markdown\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1715907877182],\n  \"source_on_save\": [false],\n  \"relative_order\": [4],\n  \"properties\": {\n    \"chunk_output_type\": [\"inline\"],\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"201,26\"],\n    \"scrollLine\": [\"0\"],\n    \"last_setup_crc32\": [\"\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1715915023],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1715915023634],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/8249F163 is not untitled or has no tempName."
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/8249F163-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/9879D8CD"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/9879D8CD-contents"
# [1] "Metadata content: {\n  \"id\": [\"9879D8CD\"],\n  \"path\": [\"~/github_tidystat/Rdev/60_communicate_report_export/f_df.CreateTableOne.source.r\"],\n  \"project_path\": [\"Rdev/60_communicate_report_export/f_df.CreateTableOne.source.r\"],\n  \"type\": [\"r_source\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1715907876927],\n  \"source_on_save\": [false],\n  \"relative_order\": [2],\n  \"properties\": {\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"9,118\"],\n    \"scrollLine\": [\"0\"],\n    \"docOutlineVisible\": [\"1\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1716179718],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1716179718],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/9879D8CD is not untitled or has no tempName."
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/9879D8CD-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/A05040E0"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/A05040E0-contents"
# [1] "Metadata content: {\n  \"id\": [\"A05040E0\"],\n  \"path\": [\"~/github_tidystat/[Working Files List].r\"],\n  \"project_path\": [\"[Working Files List].r\"],\n  \"type\": [\"r_source\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1716006288276],\n  \"source_on_save\": [false],\n  \"relative_order\": [1],\n  \"properties\": {\n    \"tempName\": [\"Untitled1\"],\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"111,0\"],\n    \"scrollLine\": [\"0\"],\n    \"docOutlineVisible\": [\"1\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1716179718],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1716179718],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "Recovering untitled file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/A05040E0"
# [1] "Processing metadata file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/A05040E0"
# $id
# [1] "A05040E0"
# 
# $path
# [1] "~/github_tidystat/[Working Files List].r"
# 
# $project_path
# [1] paste0("[Working Files List] ",basename(getwd()),".r")
# 
# $type
# [1] "r_source"
# 
# $hash
# [1] "0"
# 
# $contents
# [1] ""
# 
# $dirty
# [1] FALSE
# 
# $created
# [1] 1.716006e+12
# 
# $source_on_save
# [1] FALSE
# 
# $relative_order
# [1] 1
# 
# $properties
# $properties$tempName
# [1] "Untitled1"
# 
# $properties$source_window_id
# [1] ""
# 
# $properties$Source
# [1] "Source"
# 
# $properties$cursorPosition
# [1] "111,0"
# 
# $properties$scrollLine
# [1] "0"
# 
# $properties$docOutlineVisible
# [1] "1"
# 
# 
# $folds
# [1] ""
# 
# $lastKnownWriteTime
# [1] 1716179718
# 
# $encoding
# [1] "UTF-8"
# 
# $collab_server
# [1] ""
# 
# $source_window
# [1] ""
# 
# $last_content_update
# [1] 1716179718
# 
# $read_only
# [1] FALSE
# 
# $read_only_alternatives
# list()
# 
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/A05040E0-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/D14D3FDE"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/D14D3FDE-contents"
# [1] "Metadata content: {\n  \"id\": [\"D14D3FDE\"],\n  \"path\": [\"~/github_tidystat/Rocker set up.r\"],\n  \"project_path\": [\"Rocker set up.r\"],\n  \"type\": [\"r_source\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1715936980872],\n  \"source_on_save\": [false],\n  \"relative_order\": [5],\n  \"properties\": {\n    \"tempName\": [\"Untitled1\"],\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"85,40\"],\n    \"scrollLine\": [\"0\"],\n    \"docOutlineVisible\": [\"1\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1716179718],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1716179718],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "Recovering untitled file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/D14D3FDE"
# [1] "Processing metadata file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/D14D3FDE"
# $id
# [1] "D14D3FDE"
# 
# $path
# [1] "~/github_tidystat/Rocker set up.r"
# 
# $project_path
# [1] "Rocker set up.r"
# 
# $type
# [1] "r_source"
# 
# $hash
# [1] "0"
# 
# $contents
# [1] ""
# 
# $dirty
# [1] FALSE
# 
# $created
# [1] 1.715937e+12
# 
# $source_on_save
# [1] FALSE
# 
# $relative_order
# [1] 5
# 
# $properties
# $properties$tempName
# [1] "Untitled1"
# 
# $properties$source_window_id
# [1] ""
# 
# $properties$Source
# [1] "Source"
# 
# $properties$cursorPosition
# [1] "85,40"
# 
# $properties$scrollLine
# [1] "0"
# 
# $properties$docOutlineVisible
# [1] "1"
# 
# 
# $folds
# [1] ""
# 
# $lastKnownWriteTime
# [1] 1716179718
# 
# $encoding
# [1] "UTF-8"
# 
# $collab_server
# [1] ""
# 
# $source_window
# [1] ""
# 
# $last_content_update
# [1] 1716179718
# 
# $read_only
# [1] FALSE
# 
# $read_only_alternatives
# list()
# 
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/D14D3FDE-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/E01BF946"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/E01BF946-contents"
# [1] "Metadata content: {\n  \"id\": [\"E01BF946\"],\n  \"path\": [\"~/github_tidystat/Rdev/00_base_program/f_session_recover.dev.03.r\"],\n  \"project_path\": [\"Rdev/00_base_program/f_session_recover.dev.03.r\"],\n  \"type\": [\"r_source\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1716215549628],\n  \"source_on_save\": [false],\n  \"relative_order\": [12],\n  \"properties\": {\n    \"tempName\": [\"Untitled1\"],\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"288,0\"],\n    \"scrollLine\": [\"240\"],\n    \"docOutlineVisible\": [\"1\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1716220308],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1716220308719],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "Recovering untitled file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/E01BF946"
# [1] "Processing metadata file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/E01BF946"
# $id
# [1] "E01BF946"
# 
# $path
# [1] "~/github_tidystat/Rdev/00_base_program/f_session_recover.dev.03.r"
# 
# $project_path
# [1] "Rdev/00_base_program/f_session_recover.dev.03.r"
# 
# $type
# [1] "r_source"
# 
# $hash
# [1] "0"
# 
# $contents
# [1] ""
# 
# $dirty
# [1] FALSE
# 
# $created
# [1] 1.716216e+12
# 
# $source_on_save
# [1] FALSE
# 
# $relative_order
# [1] 12
# 
# $properties
# $properties$tempName
# [1] "Untitled1"
# 
# $properties$source_window_id
# [1] ""
# 
# $properties$Source
# [1] "Source"
# 
# $properties$cursorPosition
# [1] "288,0"
# 
# $properties$scrollLine
# [1] "240"
# 
# $properties$docOutlineVisible
# [1] "1"
# 
# 
# $folds
# [1] ""
# 
# $lastKnownWriteTime
# [1] 1716220308
# 
# $encoding
# [1] "UTF-8"
# 
# $collab_server
# [1] ""
# 
# $source_window
# [1] ""
# 
# $last_content_update
# [1] 1.71622e+12
# 
# $read_only
# [1] FALSE
# 
# $read_only_alternatives
# list()
# 
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/E01BF946-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/F29AB6E7"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/F29AB6E7-contents"
# [1] "Metadata content: {\n  \"id\": [\"F29AB6E7\"],\n  \"path\": [\"~/.config/rstudio/rstudio-prefs.json\"],\n  \"project_path\": {},\n  \"type\": [\"json\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1716207751453],\n  \"source_on_save\": [false],\n  \"relative_order\": [9],\n  \"properties\": {\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"36,1\"],\n    \"scrollLine\": [\"0\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1716208632],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1716208632976],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/F29AB6E7 is not untitled or has no tempName."
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/F29AB6E7-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/FFF77695"
# [1] "Content file exists: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/FFF77695-contents"
# [1] "Metadata content: {\n  \"id\": [\"FFF77695\"],\n  \"path\": [\"~/github_tidystat/f_df.t.tribble_construct.source.r\"],\n  \"project_path\": [\"f_df.t.tribble_construct.source.r\"],\n  \"type\": [\"r_source\"],\n  \"hash\": [\"0\"],\n  \"contents\": [\"\"],\n  \"dirty\": [false],\n  \"created\": [1715914763202],\n  \"source_on_save\": [false],\n  \"relative_order\": [6],\n  \"properties\": {\n    \"source_window_id\": [\"\"],\n    \"Source\": [\"Source\"],\n    \"cursorPosition\": [\"57,93\"],\n    \"scrollLine\": [\"0\"]\n  },\n  \"folds\": [\"\"],\n  \"lastKnownWriteTime\": [1716165863],\n  \"encoding\": [\"UTF-8\"],\n  \"collab_server\": [\"\"],\n  \"source_window\": [\"\"],\n  \"last_content_update\": [1716165863],\n  \"read_only\": [false],\n  \"read_only_alternatives\": []\n}"
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/FFF77695 is not untitled or has no tempName."
# [1] "File .Rproj.user/E3EEE3A9/sources/session-b71e3d35/FFF77695-contents is a content file, skipping."
# [1] "Checking file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/lock_file"
# [1] "Content file does not exist for metadata file: .Rproj.user/E3EEE3A9/sources/session-b71e3d35/lock_file"
# > 
# > # Print the paths of recovered files
# > print("Recovered files:")
# [1] "Recovered files:"
# > print(recovered_files)
# [[1]]
# [1] "recovered_untitled_files/Untitled-Untitled1-06A2BF28.R"
# 
# [[2]]
# NULL
# 
# [[3]]
# NULL
# 
# [[4]]
# NULL
# 
# [[5]]
# [1] "recovered_untitled_files/Untitled-Untitled1-22452B12.R"
# 
# [[6]]
# NULL
# 
# [[7]]
# NULL
# 
# [[8]]
# NULL
# 
# [[9]]
# NULL
# 
# [[10]]
# NULL
# 
# [[11]]
# NULL
# 
# [[12]]
# NULL
# 
# [[13]]
# NULL
# 
# [[14]]
# NULL
# 
# [[15]]
# [1] "recovered_untitled_files/Untitled-Untitled1-A05040E0.R"
# 
# [[16]]
# NULL
# 
# [[17]]
# [1] "recovered_untitled_files/Untitled-Untitled1-D14D3FDE.R"
# 
# [[18]]
# NULL
# 
# [[19]]
# [1] "recovered_untitled_files/Untitled-Untitled1-E01BF946.R"
# 
# [[20]]
# NULL
# 
# [[21]]
# NULL
# 
# [[22]]
# NULL
# 
# [[23]]
# NULL
# 
# [[24]]
# NULL
# 
# [[25]]
# NULL


