#!/bin/sh

# https://chatgpt.com/c/18230911-9003-42ad-9e3f-071c3310a148

# List of file patterns to ignore (add your patterns here)
patterns="*.zip *.exe *.dll specificfile.txt path/to/directory/*"

# Find files matching the patterns
ignored_files=$(git diff --cached --name-only | while read filename; do
    for pattern in $patterns; do
        # if [[ "$filename" == $pattern ]]; then
        #     echo "$filename (pattern)"
        # fi
        case "$filename" in
            $pattern)
                echo "$filename (pattern)"
                ;;
        esac
    done
done)

if [ -n "$ignored_files" ]; then
    echo "The following files are ignored due to their extension or pattern and are not allowed to be committed:"
    echo "$ignored_files"
    echo "If you need to commit these files, use 'git commit --no-verify'."
    exit 1
fi

# Make the hook executable: Ensure the script is executable by running:
# chmod +x .git/hooks/pre-commit

# Force add and commit specific files: If you need to commit a file matching the patterns, you can bypass (override) the hook by using the --no-verify option:
# git add path/to/file.zip
# git commit -m "Add specific file" --no-verify
